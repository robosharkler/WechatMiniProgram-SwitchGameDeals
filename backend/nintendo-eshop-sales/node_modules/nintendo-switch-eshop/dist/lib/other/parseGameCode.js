"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseGameCode = void 0;
const util_1 = require("util");
const constants_1 = require("../utils/constants");
/**
 * Parses the game code to extract the cross-region portion.
 *
 * @param game The game object returned from one of the other methods.
 * @param region Region code
 * @returns The 4-digit resulting game code
 */
exports.parseGameCode = (game, region) => {
    let codeParse;
    switch (region) {
        default:
        case constants_1.Region.EUROPE:
            codeParse = constants_1.EU_GAME_CODE_REGEX.exec(game.product_code_txt[0]);
            break;
        case constants_1.Region.ASIA:
            codeParse = constants_1.JP_GAME_CODE_REGEX.exec(game.InitialCode);
            break;
        case constants_1.Region.AMERICAS:
            return util_1.deprecate(() => {
                var _a;
                return ((_a = constants_1.US_GAME_CODE_REGEX.exec(game.game_code)) === null || _a === void 0 ? void 0 : _a.length) || false
                    ? constants_1.US_GAME_CODE_REGEX.exec(game.game_code)[1]
                    : '';
            }, 'game_code is no longer returned by the API for American games so it can no longer be parsed from the data.', 'DEP0001')();
    }
    return codeParse && codeParse.length > 1 ? codeParse[1] : null;
};
//# sourceMappingURL=parseGameCode.js.map